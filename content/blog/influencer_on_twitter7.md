+++
author = "Larissa"
categories = ["Python"]
tags = ["network-analysis", "twitter", "influencer", "spring2017", "jupyter-notebook", "topology"]
date = "2016-05-19"
description = "Finding Influencer in the Structure of the Twitter7 Following/Follower Network"
featuredpath = "date"
linktitle = ""
title = "Identifying Influencer"
type = "post"
+++

```python
import networkx as nx
import pylab as plt
from scipy.stats.stats import spearmanr
from collections import defaultdict
import math
```


```python
reply = nx.read_edgelist("C:/Users/laris/Desktop/PROJECT-WM/higgs-reply_network.txt", create_using=nx.DiGraph(), nodetype=int, data=(('weight',float),))
```


```python
retweet = nx.read_edgelist("C:/Users/laris/Desktop/PROJECT-WM/higgs-retweet_network.txt", create_using=nx.DiGraph(), nodetype=int, data=(('weight',float),))
```


```python
mention = nx.read_edgelist("C:/Users/laris/Desktop/PROJECT-WM/higgs-mention_network.txt", create_using=nx.DiGraph(), nodetype=int, data=(('weight',float),))
```

## Normalized In-Degree (and Total Sum)


```python
reply_in = reply.in_degree()
retweet_in = retweet.in_degree()
mention_in = mention.in_degree()

aver_reply = 0
for key in reply_in:
    aver_reply = aver_reply + reply_in[key]
#aver_reply = aver_reply / reply.number_of_nodes()

aver_retweet = 0
for key in retweet_in:
    aver_retweet = aver_retweet + retweet_in[key]
#aver_retweet = aver_retweet / retweet.number_of_nodes()

aver_mention = 0
for key in mention_in:
    aver_mention = aver_mention + mention_in[key]
#aver_mention = aver_mention / mention.number_of_nodes()

norm_reply = {}
for key in reply_in:
    norm_reply[key] = (reply_in[key] / aver_reply)
#print(dict_sort(norm_reply, 200))

norm_retweet = {}
for key in retweet_in:
    norm_retweet[key] = (retweet_in[key] / aver_retweet)
#print(dict_sort(norm_retweet, 200))

norm_mention = {}
for key in mention_in:
    norm_mention[key] = (mention_in[key] / aver_mention)
#print(dict_sort(norm_mention, 200))

influencer_ranking = {}
for key in norm_retweet:
    try:
        influencer_ranking[key] = norm_reply[key] + norm_retweet[key] + norm_mention[key]
    except:
        try:
            influencer_ranking[key] = norm_reply[key] + norm_retweet[key]
        except:
            try:
                influencer_ranking[key] = norm_reply[key] + norm_mention[key]
            except:
                try:
                    influencer_ranking[key] = norm_retweet[key] + norm_mention[key]
                except:
                    try:
                        influencer_ranking[key] = norm_reply[key]
                    except:
                        try:
                            influencer_ranking[key] = norm_retweet[key]
                        except:
                            try:
                                influencer_ranking[key] = norm_mention[key]
                            except:
                                influencer_ranking[key] = 0
print(dict_sort(influencer_ranking, 200))
```

    ((0.0015455396592100067, 54039), (0.0015546498911882378, 26352), (0.0015630275115911822, 4336), (0.0015656383041253324, 42182), (0.0015730352851228752, 2670), (0.0015736538162594385, 26398), (0.0015748895136384897, 13633), (0.0015854227456583176, 268), (0.0015878771520044588, 531), (0.0015883772766272077, 49182), (0.0015908669089949143, 957), (0.0016009986385934487, 2156), (0.0016036996417633821, 2179), (0.001603823630886347, 239782), (0.0016040123810832766, 12510), (0.0016090043081555603, 3808), (0.0016352853767041674, 4076), (0.0016531353704103049, 8603), (0.0016605985434881352, 8321), (0.0016614044764556146, 7436), (0.0016656905568243202, 389), (0.0016793713630289353, 32204), (0.0017024344310693307, 26139), (0.0017024908136337475, 489), (0.0017048959336712537, 1945), (0.0017123661368926187, 468), (0.0017304542332165678, 4730), (0.0017517532833771323, 1267), (0.001759419316523147, 16344), (0.0017663091262263445, 26), (0.0017772468218484818, 11036), (0.0017918026977538173, 36436), (0.0018056201554182676, 387), (0.0018062781137634099, 14625), (0.001806620546079905, 6644), (0.001809994965832249, 15538), (0.0018206057957351751, 122488), (0.0018285860487915922, 1373), (0.0018300273525550404, 81), (0.0018361718295702499, 1553), (0.0018433757012396488, 8806), (0.0018457244221846765, 2166), (0.001863160142772634, 250519), (0.0018634165821684208, 77), (0.0018681844503819003, 11714), (0.0018716237065121014, 22990), (0.0018719196557567758, 68285), (0.001885804753035898, 891), (0.0018905472873839914, 236), (0.001891240488278761, 113099), (0.0018924028807936813, 19604), (0.0018928242171115195, 3547), (0.0019014793177566693, 750), (0.0019078647263462123, 6241), (0.0019090806063567808, 2138), (0.0019112376820361102, 34719), (0.0019137203007883441, 13798), (0.0019148080235450579, 8005), (0.0019345277040040782, 16188), (0.0019540443499226515, 14650), (0.001967527994364665, 280), (0.001970955943860426, 248), (0.001974185333643386, 3419), (0.002001079367247468, 1574), (0.002031762044137888, 7962), (0.0020451765353185986, 37502), (0.002064853843916086, 50901), (0.00206676438888387, 3235), (0.002094052960877958, 352), (0.002121578121843226, 35248), (0.0021327173218311174, 408), (0.002132824322542121, 26677), (0.0021337513826199203, 130884), (0.002143604167913803, 69237), (0.002184195979606399, 35376), (0.0022013484793987994, 17004), (0.0022285045350078185, 35481), (0.002231683108307451, 7698), (0.002240670815225163, 132690), (0.0022413316190548886, 16452), (0.0022430885572069996, 27029), (0.002255677512916551, 14611), (0.0022683510562601953, 2237), (0.002297910784372336, 12751), (0.0023075789214879318, 32972), (0.0023313676040162025, 43), (0.002332011601242646, 9021), (0.00233332319185784, 69417), (0.0023432407878098732, 857), (0.0023582742999571546, 27738), (0.0023698093205888186, 2164), (0.002387423998385897, 8016), (0.002408139809543711, 4526), (0.0024270422008166263, 1852), (0.002428304613483201, 42), (0.0024374487892292306, 5335), (0.0024377163773152567, 47794), (0.002456634309465749, 14549), (0.002460393467283874, 2347), (0.002516331447803337, 5907), (0.0025309788735188247, 7627), (0.0025803667138073116, 8942), (0.0025843006607036674, 327), (0.0025900433616569503, 14648), (0.002590523826855417, 322), (0.0025922061944176926, 2353), (0.002598812651100839, 310), (0.0026052346579424394, 11991), (0.0026751973483818752, 37532), (0.0027120892468334087, 71), (0.0027126909217825047, 485), (0.0027178083020401992, 1880), (0.002801512332851495, 31957), (0.0028077074941255387, 1274), (0.002839432759066866, 3393), (0.0028806784270859614, 2280), (0.0028857800754657544, 13416), (0.002915541340999773, 14075), (0.0029208742363261053, 3604), (0.0029374533562158116, 2941), (0.002954401531877582, 3726), (0.0030055379318086315, 503), (0.0030233891985768906, 39511), (0.003023895014168806, 7274), (0.0030616773744460805, 335), (0.0030859014039950738, 11946), (0.0031104382555042706, 213), (0.003188126223666783, 2662), (0.003207816244185326, 979), (0.003216858853076948, 3237), (0.0032194753696363873, 16527), (0.003294121382902979, 356), (0.003306028328655769, 34268), (0.003320825119607376, 294416), (0.003323268294622969, 11921), (0.003452192607564293, 5193), (0.003462906244327626, 1343), (0.0034734298578319076, 4368), (0.0034879291932286257, 960), (0.0035187329641732422, 8135), (0.0036849747387906573, 1503), (0.003779193888900255, 301), (0.003845730093906376, 6971), (0.0039018765997434835, 2342), (0.0039042633921946594, 7756), (0.003906496585166579, 64911), (0.003911898475810014, 16358), (0.003992212711272007, 8767), (0.004091829550838025, 28476), (0.004148987810891812, 245), (0.0042356239761231484, 2055), (0.004275361924242061, 14615), (0.0043406455922097254, 4446), (0.004350499825037993, 12281), (0.004483496002061212, 511), (0.004578515486001077, 216), (0.004584547049134897, 5011), (0.004847514486281562, 206), (0.004850081575116227, 205), (0.005197959188872778, 31650), (0.005233984636717649, 8), (0.0052570323291610856, 5245), (0.005408378716345145, 4259), (0.005576449418668913, 7690), (0.005608688611407486, 2567), (0.005615651669054212, 14577), (0.005658335944104729, 2177), (0.00582350245996556, 11792), (0.006301948774551515, 1276), (0.006395232337321209, 16783), (0.006469987112866361, 16460), (0.006485619114725276, 14572), (0.006579684757187571, 19913), (0.006610147602125907, 15), (0.006629733326001891, 3571), (0.006687615828313061, 68278), (0.006694488791020436, 2014), (0.00705761588744222, 317), (0.0071116076158033135, 138), (0.007330882466032819, 3369), (0.007685646895255427, 13808), (0.007836749354772786, 283), (0.00826564443845842, 9964), (0.008490709811887395, 6940), (0.008536986569738364, 13813), (0.009258438278431308, 6948), (0.009561138040695194, 5226), (0.01066725219848343, 59195), (0.010996482453221008, 519), (0.01147324503720584, 383), (0.014022850847771922, 3549), (0.014537107782377653, 3998), (0.015808081413157177, 7533), (0.01776554986581429, 349), (0.019667936222462348, 2417), (0.02234863112613406, 14454), (0.024323305553261614, 1988), (0.024468265078439192, 220), (0.08008613623806442, 677), (0.1550336168161513, 88))
    


```python
def dict_sort(cent_dict, pos):
    # Create ordered tuple of centrality data
    cent_items=[(b,a) for (a,b) in cent_dict.items()]
    # Sort in descending order
    cent_items.sort()
    cent_items.reverse()
    return tuple(reversed(cent_items[0:pos]))
```


```python
print(reply.number_of_nodes())
print(retweet.number_of_nodes())
print(mention.number_of_nodes())
```

    38918
    256491
    116408
    

## Spearmans Rank Correlation


```python
reply_in = dict_sort(reply.in_degree(), 38918)
retweet_in = dict_sort(retweet.in_degree(), 38918)
mention_in = dict_sort(mention.in_degree(), 38918)

reply_dict = defaultdict( list )
retweet_dict = defaultdict( list )
mention_dict = defaultdict( list )

reply_list = list()
retweet_list = list()
mention_list = list()

for v, k in reply_in:
    reply_dict[k] = v
for v, k in retweet_in:
    retweet_dict[k] = v
for v, k in mention_in:
    mention_dict[k] = v

for key in reply_dict:
    reply_list.append(key)
    
for key in retweet_dict:
    retweet_list.append(key)
    
for key in mention_dict:
    mention_list.append(key)
    
print(spearmanr(reply_list, retweet_list))
print(spearmanr(reply_list, mention_list))
print(spearmanr(retweet_list, mention_list))
```

    SpearmanrResult(correlation=0.5296883041210233, pvalue=0.0)
    SpearmanrResult(correlation=-0.32828216764303436, pvalue=0.0)
    SpearmanrResult(correlation=-0.15150207907240754, pvalue=1.5920391913039797e-198)
    
